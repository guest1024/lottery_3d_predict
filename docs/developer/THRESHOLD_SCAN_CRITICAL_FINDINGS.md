# ⚠️ 阈值扫描 - 关键发现报告

**日期**: 2026-02-05  
**状态**: 🔴 严重问题  
**回测期数**: 500期

---

## 🚨 严重问题

### 核心发现

**所有阈值均表现为亏损 ❌**

| 阈值范围 | 最佳ROI | 最佳胜率 | 结论 |
|---------|---------|---------|------|
| 30-60分 | -43.77% | 15.6% | 全部亏损 |
| 50-70分 | -38.29% | 19.6% | 全部亏损 |

###详细扫描结果 (50-70分, 步长2分)

| 阈值 | 投注率 | 投注期 | 中奖期 | 胜率 | 成本 | 收益 | 利润 | ROI |
|------|--------|--------|--------|------|------|------|------|-----|
| 50分 | 100.0% | 500期 | 78期 | 15.6% | 100,000元 | 56,225元 | -43,775元 | -43.77% |
| 52分 | 99.8% | 499期 | 77期 | 15.4% | 99,800元 | 56,052元 | -43,748元 | -43.84% |
| 54分 | 94.6% | 473期 | 75期 | 15.9% | 94,600元 | 54,149元 | -40,451元 | -42.76% |
| 56分 | 68.4% | 342期 | 57期 | 16.7% | 68,400元 | 42,212元 | -26,188元 | -38.29% |
| **58分** | **18.4%** | **92期** | **18期** | **19.6%** | **18,400元** | **11,245元** | **-7,155元** | **-38.89%** |
| 60分 | 0.4% | 2期 | 1期 | 50.0% | 400元 | 173元 | -227元 | -56.75% |
| 62-70分 | 0.0% | 0期 | 0期 | 0.0% | 0元 | 0元 | 0元 | 0.00% |

---

## 🔍 问题分析

### 1. 胜率过低 (15-20%)

**现象**:
- 500期投注,只有78期中奖
- 胜率仅15.6%
- 远低于预期的30-50%

**影响**:
- 即使中奖也无法覆盖成本
- 82%的投注都是亏损

### 2. 中奖收益不足

**现象**:
- 78期中奖,总收益56,225元
- 平均每期中奖收益: 721元
- 成本200元/期,需要中奖3.6期才能回本1期投注

**计算**:
```
平均单期收益 = 56,225 / 78 = 721元
盈亏平衡胜率 = 200 / 721 = 27.7%
实际胜率 = 15.6%
差距 = 27.7% - 15.6% = 12.1%
```

### 3. 组合覆盖问题

**推测**:
- 25个组合可能覆盖不足
- Top10数字的选择可能不够准确
- 概率计算可能有偏差

### 4. 模型预测准确度

**需要验证**:
- Top5命中率是多少?
- Top10命中率是多少?
- 预测的数字概率是否可靠?

---

## 💡 可能的根本原因

### 原因1: 模型预测不准 🔥

**假设**: 模型的数字概率预测不够准确

**验证方法**:
```python
# 统计Top5/Top10的实际命中率
for period in backtest:
    top5 = model.predict_top5()
    actual = period.numbers
    hit_rate = len(set(top5) & set(actual)) / 3
```

**如果命中率<50%**: 需要重新训练模型

### 原因2: 概率分配不合理 ⚠️

**假设**: 指数衰减导致高概率组合注数不够

**问题**:
- Top1组合只分配14注
- 可能需要更激进的分配策略
- 或者需要更多组合覆盖

### 原因3: 组选策略本身的问题 ⚠️

**现实**:
- 3D彩票本质上是小概率事件
- 组选6中奖概率: 1/120 = 0.83%
- 组选3中奖概率: 1/60 = 1.67%
- 100注覆盖约25个组合,理论覆盖率<25%

**计算**:
```
组选6总数 = C(10,3) = 120种
组选3总数 = 10 * 9 = 90种
总组合 = 120 + 90 = 210种

我们选择25个 = 11.9%覆盖率
```

### 原因4: 奖金结构不支持 💰

**现实**:
- 组六奖金: 173元 (投注2元,收益比86.5x)
- 中奖1次收益: 173元
- 需要胜率>27.7%才能盈利

**但是**:
- 实际胜率只有15.6%
- 差距12%

---

## 🎯 改进方向

### 方向1: 改进模型 (优先级: 🔥🔥🔥)

**行动**:
1. 评估当前模型的Top5/Top10命中率
2. 如果<60%,需要重新训练
3. 考虑添加更多特征
4. 使用更大的数据集

### 方向2: 调整投注策略 (优先级: 🔥🔥)

**选项A: 增加覆盖率**
```python
# 从25个组合增加到50-100个
top_n = int(num_bets * 0.5)  # 50%
```

**选项B: 只投注极高概率组合**
```python
# 只选Top5组合,集中火力
# 每个组合20注
```

**选项C: 混合策略**
```python
# 50%注数分配给Top10组合
# 50%注数随机分配给其他组合
```

### 方向3: 改变游戏规则 (优先级: 🔥)

**考虑**:
- 是否应该完全放弃组选策略?
- 是否应该改为直选策略?
- 是否应该减少每期投注数?
- 是否应该只在极高评分时投注 (如70分+)?

### 方向4: 接受现实 (优先级: ⚠️)

**如果以上都无效**:
- 承认3D彩票本质上是负期望值游戏
- 将系统定位为"娱乐工具"而非"投资工具"
- 添加明确的风险警告

---

## 📊 建议的下一步测试

### Test 1: 模型准确度评估 🔥

```bash
python tools/analysis/model_accuracy_test.py \
  --periods 500 \
  --metrics "top5_hit_rate,top10_hit_rate,digit_accuracy"
```

**目标**: 了解模型真实预测能力

### Test 2: 覆盖率测试

```bash
python tools/analysis/coverage_test.py \
  --combinations 25,50,100,200 \
  --periods 500
```

**目标**: 测试不同组合数量的效果

### Test 3: 极端策略测试

```bash
# 策略1: 只投Top3组合,每个30注
python tools/analysis/extreme_strategy.py --strategy top3_heavy

# 策略2: 平均分配200个组合,每个1注
python tools/analysis/extreme_strategy.py --strategy wide_coverage
```

**目标**: 探索极端策略是否有效

---

## ⚠️ 风险警告

基于当前测试结果,我们必须认识到:

1. **当前系统不适合实际投注** 🚨
   - 所有测试阈值都表现为亏损
   - ROI -38% ~ -56%
   - 不存在盈利的投注点

2. **需要根本性改进** ⚠️
   - 不是调参问题
   - 可能需要重新设计策略
   - 可能需要重新训练模型

3. **用户警告** ⚠️
   - 必须在前端显著提示风险
   - 建议暂停推荐投注功能
   - 将系统定位为"分析工具"

---

## 📝 结论

**当前状态**: 🔴 不可用于实际投注

**核心问题**: 
- 胜率15.6%远低于盈亏平衡点27.7%
- 差距12%需要弥补
- 所有阈值均为负ROI

**推荐行动**:
1. 🔥 **立即**: 评估模型预测准确度
2. 🔥 **紧急**: 测试不同覆盖率策略
3. ⚠️ **重要**: 添加前端风险警告
4. 📊 **后续**: 考虑重新训练模型

**禁止行动**:
- ❌ 不要向用户推荐当前策略
- ❌ 不要声称任何盈利预期
- ❌ 不要使用"投资"等误导性术语

---

**报告状态**: 已完成  
**严重程度**: 🔴 严重  
**需要决策**: 是否继续优化,还是重新设计策略
